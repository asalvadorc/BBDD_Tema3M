{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Bases de Dades","title":"Bases de Dades"},{"location":"#bases-de-dades","text":"","title":"Bases de Dades"},{"location":"BD-T03_Model_Relacional/1_introducci/","text":"1. Introducci\u00f3 En 1970 E.F. Codd va introduir la teoria matem\u00e0tica de les relacions en el camp dels SGBD. El model de dades que va crear s'anomena MODEL RELACIONAL , amb una base matem\u00e0tica (la de les relacions) molt s\u00f2lida, on les dades s'estructuren en forma de relacions (taules) que s\u00f3n estructures de dades simples i uniformes, que permeten una f\u00e0cil comprensi\u00f3. En el moment en qu\u00e8 va sorgir, els models que funcionaven eren el jer\u00e0rquic i el de xarxa (tamb\u00e9 anomenat Codasyl, pel grup de treball que va estandaritzar- lo). Com a model els va superar perqu\u00e8, com va dir el mateix Codd, \" proporciona un mitj\u00e0 per a descriure les dades amb la seua estructura \u00fanicament, sense haver de superposar cap estructura addicional per a representar-se en la m\u00e0quina \" (\u00e9s a dir, sense punters ni hist\u00f2ries). A pesar d'aix\u00f2 va estar uns anys en compet\u00e8ncia amb aquells, amb molta gent molt reticent, ja que els productes comercials que eixien no eren suficientment eficients, potser perqu\u00e8 la tecnologia de l'\u00e8poca no ho permetia. A partir dels anys 80, quan la tecnologia ho va permetre, van eixir productes millors, com per exemple l' ORACLE (1979), i aleshores la seua implantaci\u00f3 va ser aplastant. Els objectius del Model Relacional s\u00f3n: Fidelitat , per a originar esquemes que representen fidelment la informaci\u00f3 (els objectes i relacions entre ells) que existeix en el domini del problema. Independ\u00e8ncia f\u00edsica [1], per a que la manera de guardar les dades no influesca en la seua manipulaci\u00f3 l\u00f2gica, i aix\u00ed els usuaris que accedeixen a aquestes dades no hagen de modificar els seus programes per canvis en l'emmagatzematge f\u00edsic. Independ\u00e8ncia l\u00f2gica , per a que les vistes externes no es vegen afectades per canvis en l'esquema conceptual de la B.D. Flexibilitat , per a poder oferir les dades a cada usuari de la forma m\u00e9s adequada a la seua aplicaci\u00f3. Uniformitat , les estructures l\u00f2giques de les dades presenten un aspecte simple i uniforme (les taules), cosa que facilita la concepci\u00f3 i manipulaci\u00f3 per part dels usuaris. Senzillesa , les caracter\u00edstiques anteriors, unides a uns llenguatges d'usuari senzills, fan que el M. Relacional siga f\u00e0cil d'entendre i d'utilitzar per l'usuari final. Recordeu que les relacions del Model Relacional s\u00f3n les taules . No s\u00f3n el mateix que les relacions del Model Entitat-Relaci\u00f3. Per evitar confusions intentarem anomenar-les sempre taules. [1]En realitat tant la independ\u00e8ncia f\u00edsica com l\u00f2gica les han intentades aconseguir tots els models. Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0","title":"1. Introducci\u00f3"},{"location":"BD-T03_Model_Relacional/1_introducci/#1-introduccio","text":"En 1970 E.F. Codd va introduir la teoria matem\u00e0tica de les relacions en el camp dels SGBD. El model de dades que va crear s'anomena MODEL RELACIONAL , amb una base matem\u00e0tica (la de les relacions) molt s\u00f2lida, on les dades s'estructuren en forma de relacions (taules) que s\u00f3n estructures de dades simples i uniformes, que permeten una f\u00e0cil comprensi\u00f3. En el moment en qu\u00e8 va sorgir, els models que funcionaven eren el jer\u00e0rquic i el de xarxa (tamb\u00e9 anomenat Codasyl, pel grup de treball que va estandaritzar- lo). Com a model els va superar perqu\u00e8, com va dir el mateix Codd, \" proporciona un mitj\u00e0 per a descriure les dades amb la seua estructura \u00fanicament, sense haver de superposar cap estructura addicional per a representar-se en la m\u00e0quina \" (\u00e9s a dir, sense punters ni hist\u00f2ries). A pesar d'aix\u00f2 va estar uns anys en compet\u00e8ncia amb aquells, amb molta gent molt reticent, ja que els productes comercials que eixien no eren suficientment eficients, potser perqu\u00e8 la tecnologia de l'\u00e8poca no ho permetia. A partir dels anys 80, quan la tecnologia ho va permetre, van eixir productes millors, com per exemple l' ORACLE (1979), i aleshores la seua implantaci\u00f3 va ser aplastant. Els objectius del Model Relacional s\u00f3n: Fidelitat , per a originar esquemes que representen fidelment la informaci\u00f3 (els objectes i relacions entre ells) que existeix en el domini del problema. Independ\u00e8ncia f\u00edsica [1], per a que la manera de guardar les dades no influesca en la seua manipulaci\u00f3 l\u00f2gica, i aix\u00ed els usuaris que accedeixen a aquestes dades no hagen de modificar els seus programes per canvis en l'emmagatzematge f\u00edsic. Independ\u00e8ncia l\u00f2gica , per a que les vistes externes no es vegen afectades per canvis en l'esquema conceptual de la B.D. Flexibilitat , per a poder oferir les dades a cada usuari de la forma m\u00e9s adequada a la seua aplicaci\u00f3. Uniformitat , les estructures l\u00f2giques de les dades presenten un aspecte simple i uniforme (les taules), cosa que facilita la concepci\u00f3 i manipulaci\u00f3 per part dels usuaris. Senzillesa , les caracter\u00edstiques anteriors, unides a uns llenguatges d'usuari senzills, fan que el M. Relacional siga f\u00e0cil d'entendre i d'utilitzar per l'usuari final. Recordeu que les relacions del Model Relacional s\u00f3n les taules . No s\u00f3n el mateix que les relacions del Model Entitat-Relaci\u00f3. Per evitar confusions intentarem anomenar-les sempre taules. [1]En realitat tant la independ\u00e8ncia f\u00edsica com l\u00f2gica les han intentades aconseguir tots els models. Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0","title":"1. Introducci\u00f3"},{"location":"BD-T03_Model_Relacional/2_estructura_del_model_relacional/","text":"2. Estructura del Model Relacional L'element b\u00e0sic del Model Relacional \u00e9s la RELACI\u00d3 , que ser\u00e0 una taula o matriu bidimensional amb unes caracter\u00edstiques o restriccions que comentarem mes avant. Normalment una relaci\u00f3 t\u00e9 un NOM (p.e. Empleat ) encara que ocasionalment no en tindr\u00e0, per exemple una taula que siga el resultat d'una consulta poc freq\u00fcent. Les FILES , on tenim la informaci\u00f3 de les ocurr\u00e8ncies, dels individus, tamb\u00e9 s'anomenen TUPLES (de vegades per similitud amb fitxers tamb\u00e9 s'anomenen REGISTRES ). Les COLUMNES , que seran caracter\u00edstiques que ens interessen dels individus i que en cada tupla agafa un valor, les anomenarem tamb\u00e9 ATRIBUTS (o CAMPS ). El conjunt de valors possibles que pot agafar un atribut determinat s'anomena DOMINI . Mes avant veurem que els dominis s'intentaran definir el millor possible, per prevenir errors. L' ESQUEMA o ESTRUCTURA DE LA RELACI\u00d3 \u00e9s la definici\u00f3 de la relaci\u00f3, \u00e9s a dir, atributs que t\u00e9, dominis d'aquests i restriccions que podrem definir, que veurem en la seg\u00fcent pregunta. L' ESTAT DE LA RELACI\u00d3 \u00e9s la informaci\u00f3 que cont\u00e9 en un determinat moment. Normalment l'estat variara cont\u00ednuament al llarg del temps, be perqu\u00e8 s'afegeixen noves tuples (augmenta la cardinalitat), b\u00e9 perqu\u00e8 es modifica el valor d'algun atribut en alguna tupla. En canvi l'esquema dif\u00edcilment canviar\u00e0. Una CLAU CANDIDATA \u00e9s un atribut o conjunt d'atributs que identifiquen un\u00edvocament cada tupla de la relaci\u00f3. En l'exemple podrien ser claus candidates Dni , Nom , fins i tot ens podr\u00edem plantejar combinacions, com el conjunt (Nom, Data_n) , ja que sembla impossible que dues persones de l'empresa es diguen igual i damunt hagen nascut el mateix dia. De entre totes les claus candidates en triarem una, que ser\u00e0 la CLAU PRINCIPAL o CLAU PRIM\u00c0RIA , i servir\u00e0 per a identificar de forma efectiva en el Model cadascuna de les tuples. Podria donar-se el cas que un atribut no agafe cap valor per a una tupla determinada, per exemple, un empleat que no tinga tel\u00e8fon. Aleshores li donarem el VALOR NUL . Per \u00faltim, les relacions o taules poden ser PERMANENTS o TEMPORALS . Les primeres es guarden. Les segones, normalment resultat d'una consulta ocasional, no. Representarem la taula amb el nom de la taula en maj\u00fascules seguit, entre par\u00e8ntesis, en min\u00fascules i separats per comes, pels noms dels camps, amb la clau principal subratllada. Tamb\u00e9 \u00e9s convenient fugir dels car\u00e0cters especials (vocals accentuades, \u00e7, \u00f1, guionet, ...) per no tenir problemes quan anem a implementar-la en un SGBD determinat (Access, Oracle, PostgreSQL, ...). Per a una millor lectura intentarem posar sempre la clau principal al principi, el o els primers camps. EMPLEAT ( dni , nom, adre\u00e7a, tel\u00e8fon, sou, data_n) Tamb\u00e9 podem utilitzar una forma alternativa de representar-la, amb un requadre que agafa tota la taula, dalt el nom de la taula, i baix cadascun dels camps, posant la clau principal en negreta o subratllada. Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0","title":"2. Estructura del Model Relacional"},{"location":"BD-T03_Model_Relacional/2_estructura_del_model_relacional/#2-estructura-del-model-relacional","text":"L'element b\u00e0sic del Model Relacional \u00e9s la RELACI\u00d3 , que ser\u00e0 una taula o matriu bidimensional amb unes caracter\u00edstiques o restriccions que comentarem mes avant. Normalment una relaci\u00f3 t\u00e9 un NOM (p.e. Empleat ) encara que ocasionalment no en tindr\u00e0, per exemple una taula que siga el resultat d'una consulta poc freq\u00fcent. Les FILES , on tenim la informaci\u00f3 de les ocurr\u00e8ncies, dels individus, tamb\u00e9 s'anomenen TUPLES (de vegades per similitud amb fitxers tamb\u00e9 s'anomenen REGISTRES ). Les COLUMNES , que seran caracter\u00edstiques que ens interessen dels individus i que en cada tupla agafa un valor, les anomenarem tamb\u00e9 ATRIBUTS (o CAMPS ). El conjunt de valors possibles que pot agafar un atribut determinat s'anomena DOMINI . Mes avant veurem que els dominis s'intentaran definir el millor possible, per prevenir errors. L' ESQUEMA o ESTRUCTURA DE LA RELACI\u00d3 \u00e9s la definici\u00f3 de la relaci\u00f3, \u00e9s a dir, atributs que t\u00e9, dominis d'aquests i restriccions que podrem definir, que veurem en la seg\u00fcent pregunta. L' ESTAT DE LA RELACI\u00d3 \u00e9s la informaci\u00f3 que cont\u00e9 en un determinat moment. Normalment l'estat variara cont\u00ednuament al llarg del temps, be perqu\u00e8 s'afegeixen noves tuples (augmenta la cardinalitat), b\u00e9 perqu\u00e8 es modifica el valor d'algun atribut en alguna tupla. En canvi l'esquema dif\u00edcilment canviar\u00e0. Una CLAU CANDIDATA \u00e9s un atribut o conjunt d'atributs que identifiquen un\u00edvocament cada tupla de la relaci\u00f3. En l'exemple podrien ser claus candidates Dni , Nom , fins i tot ens podr\u00edem plantejar combinacions, com el conjunt (Nom, Data_n) , ja que sembla impossible que dues persones de l'empresa es diguen igual i damunt hagen nascut el mateix dia. De entre totes les claus candidates en triarem una, que ser\u00e0 la CLAU PRINCIPAL o CLAU PRIM\u00c0RIA , i servir\u00e0 per a identificar de forma efectiva en el Model cadascuna de les tuples. Podria donar-se el cas que un atribut no agafe cap valor per a una tupla determinada, per exemple, un empleat que no tinga tel\u00e8fon. Aleshores li donarem el VALOR NUL . Per \u00faltim, les relacions o taules poden ser PERMANENTS o TEMPORALS . Les primeres es guarden. Les segones, normalment resultat d'una consulta ocasional, no. Representarem la taula amb el nom de la taula en maj\u00fascules seguit, entre par\u00e8ntesis, en min\u00fascules i separats per comes, pels noms dels camps, amb la clau principal subratllada. Tamb\u00e9 \u00e9s convenient fugir dels car\u00e0cters especials (vocals accentuades, \u00e7, \u00f1, guionet, ...) per no tenir problemes quan anem a implementar-la en un SGBD determinat (Access, Oracle, PostgreSQL, ...). Per a una millor lectura intentarem posar sempre la clau principal al principi, el o els primers camps. EMPLEAT ( dni , nom, adre\u00e7a, tel\u00e8fon, sou, data_n) Tamb\u00e9 podem utilitzar una forma alternativa de representar-la, amb un requadre que agafa tota la taula, dalt el nom de la taula, i baix cadascun dels camps, posant la clau principal en negreta o subratllada. Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0","title":"2. Estructura del Model Relacional"},{"location":"BD-T03_Model_Relacional/3_restriccions/","text":"3. Restriccions Igual que en altres models de dades, en el Model Relacional existeixen restriccions, \u00e9s a dir, estructures o ocurr\u00e8ncies no permeses. Aquestes restriccions poden ser de dos tipus fonamentals: restriccions inherents , que s\u00f3n imposades pel propi model, i restriccions d'usuari (tamb\u00e9 anomenades restriccions sem\u00e0ntiques ) en les quals \u00e9s l'usuari qui prohibeix, perqu\u00e8 el model li ho permet, determinades circumst\u00e0ncies per a poder definir millor la Base de Dades. 3.1 Restriccions inherents Com hem dit s\u00f3n les que imposa el propi model. Algunes s\u00f3n caracter\u00edstiques que han d'acomplir les relacions. Per tant no qualsevol taula matem\u00e0tica \u00e9s una relaci\u00f3. Podem considerar les seg\u00fcents: Valors at\u00f2mics : cada valor de la taula, \u00e9s a dir, qualsevol valor de qualsevol atribut de qualsevol tupla ha de ser simple, no divisible. Per tant no valen atributs compostos o repetitius. Aix\u00ed, si considerem Nom en la relaci\u00f3 Empleat com a nom de pila m\u00e9s cognoms, no ser\u00e0 divisible (no podr\u00e9 agafar posteriorment el nom de pila per una banda i els cognoms per una altra; si ho volguera fer, s'haurien de definir els atributs simples Cognom1 , Cognom2 i Nom ). Tampoc valen valors repetitius, per exemple un vector de 12 entrades. Queden per tant descartats els atributs multivaluats . Tuples distintes : no poden haver dues tuples iguals. Aix\u00f2 \u00e9s una difer\u00e8ncia respecte a les taules matem\u00e0tiques on s\u00ed que es poden duplicar files. L'ordre de les tuples no \u00e9s significatiu . L'ordre dels atributs no \u00e9s significatiu . 3.2 Restriccions d'usuari Les anteriors s\u00f3n condicions, imposicions que ens d\u00f3na el mateix model. Les realment interessants per a nosaltres s\u00f3n les restriccions d'usuari, tamb\u00e9 anomenades restriccions sem\u00e0ntiques, ja que seran condicions que podrem posar nosaltres per a que l'esquema de la B.D. explique el millor possible la realitat, i evitar possibles errors en les dades. 3.2.1 Restricci\u00f3 de domini El valor d'un atribut ha de ser un valor at\u00f2mic del domini. Definint clarament el domini ens assegurem (dins del possible) que l'atribut no puga agafar valors incorrectes. Per una banda, el domini ser\u00e0 d'un tipus determinat, triat d'una gamma prou extensa: enter curt, enter, enter llarg, real, doble precisi\u00f3, car\u00e0cter, cadena de car\u00e0cters (text), data, hora, ... Aix\u00ed, per exemple, definint el Sou com un n\u00famero real impedirem que per error puga agafar el valor 2. R 00'00, o que la data de naixement , amb domini de tipus data, siga 15- 14 -1958 o 31 - 2 -1958. Tamb\u00e9 es podran definir dominis que estiguen en un determinat interval (nota d'un examen: 0-10) o d'un tipus enumerat (nota d'avaluaci\u00f3: MD, IN, SUF, BE, NOT, EXC). 3.2.2 Restricci\u00f3 de clau principal Permet declarar un atribut o un conjunt d'atributs com a CLAU PRINCIPAL o PRIM\u00c0RIA (Primary Key). Aquesta clau principal servir\u00e0 per a identificar un\u00edvocament cadascuna de les files. Com a conseq\u00fc\u00e8ncia de l'anterior, la clau principal no podr\u00e0 agafar valors nuls ni repetits, ja que en cas contrari no es podria assegurar la identificaci\u00f3 de les files. Aquestes \u00faltimes caracter\u00edstiques tamb\u00e9 les podran tenir altres atributs, cosa que d\u00f3na lloc als tipus de restricci\u00f3 que es veuen en els seg\u00fcents punts. Nosaltres sempre definirem una clau principal. Si tenim claus candidates, triem una d'elles com a clau principal. Si no en tenim, ens inventem un camp que servir\u00e0 de clau principal (b\u00e9 un n\u00famero o b\u00e9 un codi alfanum\u00e8ric). No \u00e9s convenient que la clau principal estiga formada per un n\u00famero excessiu de camps. Podr\u00edem dir que 3 \u00e9s el m\u00e0xim. Si la clau candidata est\u00e0 formada per m\u00e9s de 3 camps, o b\u00e9 triem una altra clau candidata, o b\u00e9 ens inventem una. Ho representarem aix\u00ed: EMPLEAT ( dni , nom, adre\u00e7a, tel\u00e8fon, sou, data_n) 3.2.3 Restricci\u00f3 d'unicitat Si en un camp, o en un conjunt de camps, definim la restricci\u00f3 d'unicitat ( UNIQUE ), aix\u00f2 obliga a que, en cas de tenir valors el camp, no es puguen repetir. Suposem, per exemple, els alumnes d'un Institut. La clau no pot ser el DNI, ja que alguns alumnes no en tindran, per\u00f2 en cas de tenir-ne, \u00e9s clar que no es podr\u00e0 repetir. Representarem que un camp \u00e9s \u00fanic, posant \u00fanic entre par\u00e8ntesi baix del camp. Per exemple, si considerem que el camp nom de la taula EMPLEAT ha de ser \u00fanic, ho representarem aix\u00ed: EMPLEAT ( dni , nom, adreca, telefon, sou, data_n) (\u00fanic) 3.2.4 Restricci\u00f3 de valor no nul Obliga a que el camp agafe sempre un valor. Per exemple, el camp Nom \u00e9s un bon candidat a ser no nul. Ho representarem posant no nul entre par\u00e8ntesi baix del camp. EMPLEAT dni , nom, adreca, telefon, sou, data_n) (no nul) Per mig de la representaci\u00f3 alternativa, podem marcar amb un punt negre davant del camp no nul. 3.2.5 Integritat referencial Per poder explicar-la ens recolzarem en un exemple. que es podria traduir en les seg\u00fcents taules: Si en una taula R2 ( Familiar ) tenim un atribut ( dni_emp ) que \u00e9s clau (prim\u00e0ria o candidata) d'una altra taula R1 ( Empleat -- > dni ), tot valor d'aquell atribut ha de concordar amb un valor de la clau de R1 (no he de poder posar en familiar un Dni que no el tinga cap empleat de l'empresa). L'atribut en R2 \u00e9s, per tant, una CLAU EXTERNA . Ha de ser impossible posar en Familiar el Dni 18.754.321, perqu\u00e8 no est\u00e0 en l'altra, i per tant no \u00e9s un Dni d'un empleat de l'empresa. Les relacions R1 i R2 no tenen per qu\u00e8 ser distintes, poden ser la mateixa. Aix\u00ed, si considerem el supervisor, aquest ha de ser de l'empresa: Supervisor \u00e9s una clau externa, per\u00f2 de la mateixa taula. No tots els SGBD permeten una clau externa reflexiva. Una manera de representar les claus externes en l'esquema \u00e9s la seg\u00fcent: On el doble subratllat indica una clau externa (que en aquest exemple, a m\u00e9s, forma part de la clau principal, per\u00f2 que no sempre ser\u00e0 aix\u00ed) que \u201capunta\u201d a la clau principal de l\u2019altra taula. L'altra manera, utilitzant la forma alternativa, ser\u00e0 aquesta, que tamb\u00e9 \u00e9s molt f\u00e0cil d'entendre: A\u00e7\u00f2 ens impedir\u00e0 que introdu\u00efm valors no correctes, no existents. \u00bfPer\u00f2 qu\u00e8 passar\u00e0 si esborrem un empleat, o si modifiquem el seu Dni? \u00bfQu\u00e8 fem amb els familiars? Doncs en principi tres podrien ser les accions a realitzar, i depenent de la situaci\u00f3 particular triar\u00edem una o una altra: No deixar esborrar-lo o modificar-lo ( NO ACTION ). Segurament no \u00e9s l'opci\u00f3 m\u00e9s adequada per a l'exemple dels empleats i els familiars. Per\u00f2 pensem en un altre exemple, amb clients i factures. Qu\u00e8 fem si s'esborra un client i tenim factures d'ell? Segurament el m\u00e9s adequat ser\u00e0 no fer l'acci\u00f3, \u00e9s a dir, no esborrar el client (sobretot si les factures estan pendentes de cobrar ...). Esborrar tamb\u00e9 els familiars o canviar-los en cascada ( CASCADE ). Segurament aquesta \u00e9s l'opci\u00f3 m\u00e9s adequada per al cas dels familiars, que s'eliminen autom\u00e0ticament. Canviar el valor de la clau externa al valor nul o un valor predeterminat ( SET NULL o SET DEFAULT ). En l'exemple dels familiars no t\u00e9 sentit ja que no ens interessen els familiars dels que no s\u00f3n de l'empresa. Per\u00f2 imaginem, per exemple, un prove\u00efdor que ens ha proporcionat uns articles. Pel fet de no treballar ja amb el prove\u00efdor i llevar-lo de la B.D. no haur\u00edem d'eliminar els articles. Seria suficient amb donar un valor nul al prove\u00efdor d'aquest article. Observem, per\u00f2, que aquesta clau externa hauria d'admetre valors nuls. Si no ho permet, millor un valor per defecte. Hi ha SGBD que fins i tot permeten accions distintes per al cas d'esborrament i d'actualitzaci\u00f3 de la clau, com per exemple Access. 3.2.6 Restriccions externes A pesar de totes les restriccions anteriors, que normalment els SGBDR compleixen, hi ha d'altres que no es poden expressar per mig del Model Relacional, i per tant no poden complir directament els SGBDR. S\u00f3n les restriccions externes a l'esquema relacional . Estaran normalment les heretades dels Model E/R, i hi hauran algunes m\u00e9s que s\u00ed que es podien expressar en el Model E/R, per\u00f2 no en el Model Relacional. Les veurem en la pregunta 4. Els SGBDR m\u00e9s avan\u00e7ats, m\u00e9s potents, permetran un tractament a aquestes restriccions externes, consistents en executar un procediment definit per l'usuari despr\u00e9s d'una actualitzaci\u00f3. S\u00f3n els Disparadors ( TRIGGERS ). Aquest concepte \u00e9s molt potent, ja que d\u00f3na una resposta procedimental on es pot fer qualsevol cosa. Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0","title":"3. Restriccions"},{"location":"BD-T03_Model_Relacional/3_restriccions/#3-restriccions","text":"Igual que en altres models de dades, en el Model Relacional existeixen restriccions, \u00e9s a dir, estructures o ocurr\u00e8ncies no permeses. Aquestes restriccions poden ser de dos tipus fonamentals: restriccions inherents , que s\u00f3n imposades pel propi model, i restriccions d'usuari (tamb\u00e9 anomenades restriccions sem\u00e0ntiques ) en les quals \u00e9s l'usuari qui prohibeix, perqu\u00e8 el model li ho permet, determinades circumst\u00e0ncies per a poder definir millor la Base de Dades.","title":"3. Restriccions"},{"location":"BD-T03_Model_Relacional/3_restriccions/#31-restriccions-inherents","text":"Com hem dit s\u00f3n les que imposa el propi model. Algunes s\u00f3n caracter\u00edstiques que han d'acomplir les relacions. Per tant no qualsevol taula matem\u00e0tica \u00e9s una relaci\u00f3. Podem considerar les seg\u00fcents: Valors at\u00f2mics : cada valor de la taula, \u00e9s a dir, qualsevol valor de qualsevol atribut de qualsevol tupla ha de ser simple, no divisible. Per tant no valen atributs compostos o repetitius. Aix\u00ed, si considerem Nom en la relaci\u00f3 Empleat com a nom de pila m\u00e9s cognoms, no ser\u00e0 divisible (no podr\u00e9 agafar posteriorment el nom de pila per una banda i els cognoms per una altra; si ho volguera fer, s'haurien de definir els atributs simples Cognom1 , Cognom2 i Nom ). Tampoc valen valors repetitius, per exemple un vector de 12 entrades. Queden per tant descartats els atributs multivaluats . Tuples distintes : no poden haver dues tuples iguals. Aix\u00f2 \u00e9s una difer\u00e8ncia respecte a les taules matem\u00e0tiques on s\u00ed que es poden duplicar files. L'ordre de les tuples no \u00e9s significatiu . L'ordre dels atributs no \u00e9s significatiu .","title":"3.1 Restriccions inherents"},{"location":"BD-T03_Model_Relacional/3_restriccions/#32-restriccions-dusuari","text":"Les anteriors s\u00f3n condicions, imposicions que ens d\u00f3na el mateix model. Les realment interessants per a nosaltres s\u00f3n les restriccions d'usuari, tamb\u00e9 anomenades restriccions sem\u00e0ntiques, ja que seran condicions que podrem posar nosaltres per a que l'esquema de la B.D. explique el millor possible la realitat, i evitar possibles errors en les dades.","title":"3.2 Restriccions d'usuari"},{"location":"BD-T03_Model_Relacional/3_restriccions/#321-restriccio-de-domini","text":"El valor d'un atribut ha de ser un valor at\u00f2mic del domini. Definint clarament el domini ens assegurem (dins del possible) que l'atribut no puga agafar valors incorrectes. Per una banda, el domini ser\u00e0 d'un tipus determinat, triat d'una gamma prou extensa: enter curt, enter, enter llarg, real, doble precisi\u00f3, car\u00e0cter, cadena de car\u00e0cters (text), data, hora, ... Aix\u00ed, per exemple, definint el Sou com un n\u00famero real impedirem que per error puga agafar el valor 2. R 00'00, o que la data de naixement , amb domini de tipus data, siga 15- 14 -1958 o 31 - 2 -1958. Tamb\u00e9 es podran definir dominis que estiguen en un determinat interval (nota d'un examen: 0-10) o d'un tipus enumerat (nota d'avaluaci\u00f3: MD, IN, SUF, BE, NOT, EXC).","title":"3.2.1 Restricci\u00f3 de domini"},{"location":"BD-T03_Model_Relacional/3_restriccions/#322-restriccio-de-clau-principal","text":"Permet declarar un atribut o un conjunt d'atributs com a CLAU PRINCIPAL o PRIM\u00c0RIA (Primary Key). Aquesta clau principal servir\u00e0 per a identificar un\u00edvocament cadascuna de les files. Com a conseq\u00fc\u00e8ncia de l'anterior, la clau principal no podr\u00e0 agafar valors nuls ni repetits, ja que en cas contrari no es podria assegurar la identificaci\u00f3 de les files. Aquestes \u00faltimes caracter\u00edstiques tamb\u00e9 les podran tenir altres atributs, cosa que d\u00f3na lloc als tipus de restricci\u00f3 que es veuen en els seg\u00fcents punts. Nosaltres sempre definirem una clau principal. Si tenim claus candidates, triem una d'elles com a clau principal. Si no en tenim, ens inventem un camp que servir\u00e0 de clau principal (b\u00e9 un n\u00famero o b\u00e9 un codi alfanum\u00e8ric). No \u00e9s convenient que la clau principal estiga formada per un n\u00famero excessiu de camps. Podr\u00edem dir que 3 \u00e9s el m\u00e0xim. Si la clau candidata est\u00e0 formada per m\u00e9s de 3 camps, o b\u00e9 triem una altra clau candidata, o b\u00e9 ens inventem una. Ho representarem aix\u00ed: EMPLEAT ( dni , nom, adre\u00e7a, tel\u00e8fon, sou, data_n)","title":"3.2.2 Restricci\u00f3 de clau principal"},{"location":"BD-T03_Model_Relacional/3_restriccions/#323-restriccio-dunicitat","text":"Si en un camp, o en un conjunt de camps, definim la restricci\u00f3 d'unicitat ( UNIQUE ), aix\u00f2 obliga a que, en cas de tenir valors el camp, no es puguen repetir. Suposem, per exemple, els alumnes d'un Institut. La clau no pot ser el DNI, ja que alguns alumnes no en tindran, per\u00f2 en cas de tenir-ne, \u00e9s clar que no es podr\u00e0 repetir. Representarem que un camp \u00e9s \u00fanic, posant \u00fanic entre par\u00e8ntesi baix del camp. Per exemple, si considerem que el camp nom de la taula EMPLEAT ha de ser \u00fanic, ho representarem aix\u00ed: EMPLEAT ( dni , nom, adreca, telefon, sou, data_n) (\u00fanic)","title":"3.2.3 Restricci\u00f3 d'unicitat"},{"location":"BD-T03_Model_Relacional/3_restriccions/#324-restriccio-de-valor-no-nul","text":"Obliga a que el camp agafe sempre un valor. Per exemple, el camp Nom \u00e9s un bon candidat a ser no nul. Ho representarem posant no nul entre par\u00e8ntesi baix del camp. EMPLEAT dni , nom, adreca, telefon, sou, data_n) (no nul) Per mig de la representaci\u00f3 alternativa, podem marcar amb un punt negre davant del camp no nul.","title":"3.2.4 Restricci\u00f3 de valor no nul"},{"location":"BD-T03_Model_Relacional/3_restriccions/#325-integritat-referencial","text":"Per poder explicar-la ens recolzarem en un exemple. que es podria traduir en les seg\u00fcents taules: Si en una taula R2 ( Familiar ) tenim un atribut ( dni_emp ) que \u00e9s clau (prim\u00e0ria o candidata) d'una altra taula R1 ( Empleat -- > dni ), tot valor d'aquell atribut ha de concordar amb un valor de la clau de R1 (no he de poder posar en familiar un Dni que no el tinga cap empleat de l'empresa). L'atribut en R2 \u00e9s, per tant, una CLAU EXTERNA . Ha de ser impossible posar en Familiar el Dni 18.754.321, perqu\u00e8 no est\u00e0 en l'altra, i per tant no \u00e9s un Dni d'un empleat de l'empresa. Les relacions R1 i R2 no tenen per qu\u00e8 ser distintes, poden ser la mateixa. Aix\u00ed, si considerem el supervisor, aquest ha de ser de l'empresa: Supervisor \u00e9s una clau externa, per\u00f2 de la mateixa taula. No tots els SGBD permeten una clau externa reflexiva. Una manera de representar les claus externes en l'esquema \u00e9s la seg\u00fcent: On el doble subratllat indica una clau externa (que en aquest exemple, a m\u00e9s, forma part de la clau principal, per\u00f2 que no sempre ser\u00e0 aix\u00ed) que \u201capunta\u201d a la clau principal de l\u2019altra taula. L'altra manera, utilitzant la forma alternativa, ser\u00e0 aquesta, que tamb\u00e9 \u00e9s molt f\u00e0cil d'entendre: A\u00e7\u00f2 ens impedir\u00e0 que introdu\u00efm valors no correctes, no existents. \u00bfPer\u00f2 qu\u00e8 passar\u00e0 si esborrem un empleat, o si modifiquem el seu Dni? \u00bfQu\u00e8 fem amb els familiars? Doncs en principi tres podrien ser les accions a realitzar, i depenent de la situaci\u00f3 particular triar\u00edem una o una altra: No deixar esborrar-lo o modificar-lo ( NO ACTION ). Segurament no \u00e9s l'opci\u00f3 m\u00e9s adequada per a l'exemple dels empleats i els familiars. Per\u00f2 pensem en un altre exemple, amb clients i factures. Qu\u00e8 fem si s'esborra un client i tenim factures d'ell? Segurament el m\u00e9s adequat ser\u00e0 no fer l'acci\u00f3, \u00e9s a dir, no esborrar el client (sobretot si les factures estan pendentes de cobrar ...). Esborrar tamb\u00e9 els familiars o canviar-los en cascada ( CASCADE ). Segurament aquesta \u00e9s l'opci\u00f3 m\u00e9s adequada per al cas dels familiars, que s'eliminen autom\u00e0ticament. Canviar el valor de la clau externa al valor nul o un valor predeterminat ( SET NULL o SET DEFAULT ). En l'exemple dels familiars no t\u00e9 sentit ja que no ens interessen els familiars dels que no s\u00f3n de l'empresa. Per\u00f2 imaginem, per exemple, un prove\u00efdor que ens ha proporcionat uns articles. Pel fet de no treballar ja amb el prove\u00efdor i llevar-lo de la B.D. no haur\u00edem d'eliminar els articles. Seria suficient amb donar un valor nul al prove\u00efdor d'aquest article. Observem, per\u00f2, que aquesta clau externa hauria d'admetre valors nuls. Si no ho permet, millor un valor per defecte. Hi ha SGBD que fins i tot permeten accions distintes per al cas d'esborrament i d'actualitzaci\u00f3 de la clau, com per exemple Access.","title":"3.2.5 Integritat referencial"},{"location":"BD-T03_Model_Relacional/3_restriccions/#326-restriccions-externes","text":"A pesar de totes les restriccions anteriors, que normalment els SGBDR compleixen, hi ha d'altres que no es poden expressar per mig del Model Relacional, i per tant no poden complir directament els SGBDR. S\u00f3n les restriccions externes a l'esquema relacional . Estaran normalment les heretades dels Model E/R, i hi hauran algunes m\u00e9s que s\u00ed que es podien expressar en el Model E/R, per\u00f2 no en el Model Relacional. Les veurem en la pregunta 4. Els SGBDR m\u00e9s avan\u00e7ats, m\u00e9s potents, permetran un tractament a aquestes restriccions externes, consistents en executar un procediment definit per l'usuari despr\u00e9s d'una actualitzaci\u00f3. S\u00f3n els Disparadors ( TRIGGERS ). Aquest concepte \u00e9s molt potent, ja que d\u00f3na una resposta procedimental on es pot fer qualsevol cosa. Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0","title":"3.2.6 Restriccions externes"},{"location":"BD-T03_Model_Relacional/4_tranformaci_del_m_er_al_m_relacional/","text":"4. Tranformaci\u00f3 del M. E/R al M. Relacional A continuaci\u00f3 veurem les regles de transformaci\u00f3 de l'esquema en el Model E/R al Model Relacional. D'aquesta manera continuem el proc\u00e9s de disseny d'una Base de Dades. En el Tema 2 hem apr\u00e8s a fer l'esquema en el Model Entitat-Relaci\u00f3. Ara el traduirem al Model Relacional, i ja es podr\u00e0 implementar en qualsevol SGBD Relacional. Faltaria nom\u00e9s el proc\u00e9s de Normalitzaci\u00f3 (tema 4) per acabar de deixar les taules perfectament dissenyades. De tota manera les Bases de Dades que dissenyem nosaltres, amb el proc\u00e9s descrit anteriorment, tindran unes taules molt \"normalitzades\", sempre que dissenyem b\u00e9. 4.1 Entitats Tota entitat es transformar\u00e0 en una taula, amb tots els seus atributs, que es consideraran com a simples. Es tria un (o un conjunt) com a clau principal, i el denotarem subratllant-lo. Les entitats d\u00e8bils les estudiarem millor m\u00e9s endavant. En el nostre exemple, com ten\u00edem 4 entitats, ens eixiran de moment 4 taules: No considerarem els atributs multivaluats. Els tractarem i solucionarem en el tema seg\u00fcent, el de Normalitzaci\u00f3 . 4.2 Relacions 1:N Per cada relaci\u00f3 1:N entre les entitats A i B , on A \u00e9s la que participa amb grau de cardinalitat 1, i B amb grau N, s'inclou un nou camp en B (del mateix tipus que la clau principal de A ) que a m\u00e9s ser\u00e0 clau externa que apuntar\u00e0 a A , m\u00e9s concretament a la clau principal de A . En moltes ocasions al camp nou de B se li posa el mateix nom que a la clau principal de A , per\u00f2 no \u00e9s necessari, dep\u00e9n del gust de cadasc\u00fa. Tamb\u00e9 s'inclouran en B tots els possibles atributs de la relaci\u00f3. La seg\u00fcent animaci\u00f3 intenta explicar-ho millor: Si a m\u00e9s l'entitat que participa amb grau N ho fa de forma total (com en la figura de baix), la clau externa no pot ser nula (\u00e9s a dir sempre ha de tenir un valor). En l'exemple nostre: Per la relaci\u00f3 Pertany (figura de dalt) inclourem l'atribut departament a Empleat , que a m\u00e9s haur\u00e0 de ser no nul. Per la relaci\u00f3 Controla inclourem l'atribut departament a Projecte (no nul). Per la relaci\u00f3 Supervisa inclourem l'atribut supervisor a Empleat (\u00e9s reflexiva), per\u00f2 aquest s\u00ed que pot ser nul. Encara que semble estrany, un camp pot ser clau externa que apunta a la clau principal de la mateixa taula. Per la relaci\u00f3 T\u00e9 entre empleat i familiar, inclourem en FAMILIAR l'atribut dni_e , per\u00f2 com que Familiar \u00e9s d\u00e8bil la veurem millor un poc m\u00e9s endavant. 4.3 Relacions M:N Per cada relaci\u00f3 M:N construirem una nova taula on s'inclouran com a clau externa les claus principals de les dues entitats, i a m\u00e9s la seua combinaci\u00f3 constituir\u00e0 (o formar\u00e0 part de) la clau principal. Inclourem tamb\u00e9 els possibles atributs de la relaci\u00f3. En l'exemple: Cada vegada que ens trobem amb una relaci\u00f3 M:N i la tradu\u00efm per una nova taula haurem de preguntar-nos si \u00e9s suficient amb la clau principal formada per les dues claus externes, o si fa falta afegir un altre camp. Hem de ser conscients que la clau principal no puga repetir-se, que hi haja 2 files amb la mateixa clau principal. Aix\u00ed, en l'exemple, ens haur\u00edem de fer la seg\u00fcent pregunta: pot un empleat treballar en el mateix projecte m\u00e9s d'una vegada? En aquest cas la contestaci\u00f3 \u00e9s negativa, i per tant \u00e9s suficient amb aquesta clau principal. Per\u00f2 suposem que la resposta \u00e9s que s\u00ed que pot treballar m\u00e9s d'una vegada al llarg del temps. En aquest cas seria una esp\u00e8cie d'hist\u00f2ric, on faria falta, a m\u00e9s, saber quan comen\u00e7a i quan acaba de treballar en un projecte un determinat treballador (serien atributs de la relaci\u00f3): Aleshores, com no \u00e9s suficient amb la clau principal formada per les dues claus externes, inclourem un altre camp en la clau principal. Sembla que el m\u00e9s adequat seria Data_c (ja no es pot donar el cas que el mateix treballador treballe m\u00e9s d'una vegada en el mateix projecte, comen\u00e7ant el mateix dia) Per\u00f2 per una altra banda, les claus principals molt llargues no s\u00f3n operatives, i encara que la traducci\u00f3 literal siga com hem dit, per motius pr\u00e0ctics podem canviar la clau principal. Considerarem que el nombre m\u00e0xim de camps en la clau principal \u00e9s de 3. 4 ja s\u00f3n massa, i aleshores buscarem una altra clau principal (un codi de treball, per exemple). Les claus externes continuarien sent-ho. 4.4 Relacions 1:1 No hi ha una forma \u00fanica de traduir aquestes relacions. Tres seran les possibles traduccions, segons la participaci\u00f3 total o parcial de les entitats en la relaci\u00f3, i tamb\u00e9 segons el que ens diga el \" sentit com\u00fa \". Si de les dues entitats que entren la relaci\u00f3, A i B , una d'elles i nom\u00e9s una, participa de forma total, per exemple B , traduirem la relaci\u00f3 1:1 com una clau externa en la taula corresponent a l'entitat que participa de forma total ( B ). Podem obligar tamb\u00e9 a que aquest camp que ser\u00e0 clau externa siga no nul (ja que totes les ocurr\u00e8ncies de B entren en la relaci\u00f3). Tamb\u00e9 podem fer que aquest camp siga \u00fanic (no es podr\u00e0 repetir, ja que si es puguera repetir seria una relaci\u00f3 1:N). A m\u00e9s, inclourem en B tots els possibles atributs de la relaci\u00f3. Per exemple, la relaci\u00f3 dirigeix , que \u00e9s 1:1 entre EMPLEAT i DEPARTAMENT : Com que l'entitat de la dreta participa de forma total, triarem DEPARTAMENT : Ho fem d'aquesta manera perqu\u00e8 tots els departaments tenen director, per\u00f2 no tots els empleats s\u00f3n directors. Si pos\u00e0rem la clau externa en la taula EMPLEAT (s'anomenaria per exemple dep_que_dirigeix ) moltes vegades estaria buit, ja que relativament s\u00f3n pocs els empleats que dirigeixen un departament. Vegem un altre exemple de relaci\u00f3 1:1, el de les papallones. Ten\u00edem una relaci\u00f3 1:1 entre PERSONA i COL\u00b7LECCI\u00d3 Triar\u00edem COL\u00b7LECCI\u00d3 , ja que entra de forma plena o total en la relaci\u00f3. Si les dues entitats participen de forma total, es pot considerar tot (les dues entitats i la relaci\u00f3, amb els seus possibles atributs) com una sola taula. En la pr\u00e0ctica aix\u00f2 ser\u00e0 prou estrany, perqu\u00e8 ja ho haur\u00edem considerat una sola entitat. Per exemple, considerem que totes les persones que estudiem tenen una col\u00b7lecci\u00f3: Aleshores podr\u00edem considerar una \u00fanica taula, que continga les dades de la persona i de la seua col\u00b7lecci\u00f3: De tota manera, pot ser ens interesse (per separar clarament els dos tipus d'informaci\u00f3) dues taules. Aleshores podr\u00edem traduir-lo com en el primer punt, amb una clau externa (no nula) en una de les dues taules, i haur\u00edem de triar la taula que menys s'utilitze. Si les dues entitats participen de forma parcial, com que si posem una clau externa en una de les dues, moltes vegades tindr\u00e0 valor nul, podem traduir-la com una nova taula que marque la relaci\u00f3, on hi haur\u00e0 una tupla per cada relaci\u00f3 entre dues ocurr\u00e8ncies. Inclour\u00edem en la nova taula els possibles atributs de la relaci\u00f3. En l'exemple podria ser que les col\u00b7leccions pertanyen a una persona particular o a una instituci\u00f3 (no tenen propietari): Quedaria: Per\u00f2 com coment\u00e0vem al principi, haurem d'aplicar el sentit com\u00fa, ja que potser una de les dues podria participar de forma \"quasi\" total (per exemple, quasi totes les col\u00b7leccions s\u00f3n d'una persona). Aleshores podria ser millor traduir-lo com en el primer cas, posant la clau externa en la que participa de forma \"quasi\" total, ja que aquesta tindr\u00e0 relativament pocs valors nuls, i seria m\u00e9s cost\u00f3s mantenir una altra taula. Evidentment la clau externa s\u00ed que podria ser nula, en aquest cas. Resumint, una relaci\u00f3 1:1 quasi sempre la traduirem com una clau externa en la taula que participa en la relaci\u00f3 de forma total o quasi total (o la que previsiblement t\u00e9 m\u00e9s ocurr\u00e8ncies en la relaci\u00f3) 4.5 Entitats d\u00e8bils Les entitats d\u00e8bils, com que com a m\u00ednim depenen d'una altra, podrem ser m\u00e9s restrictius que les altres. Una entitat sempre \u00e9s d\u00e8bil a trav\u00e9s, com a m\u00ednim, d'una relaci\u00f3 que la comunica amb l'entitat principal. A m\u00e9s participa de forma total (com que no pot existir sense l'altra, tota ocurr\u00e8ncia est\u00e0 en la relaci\u00f3). Per tant, tota entitat d\u00e8bil tindr\u00e0 una clau externa, que apunta a la principal i ser\u00e0 no nula. Per\u00f2 encara podem anar m\u00e9s enll\u00e0: Depend\u00e8ncia en exist\u00e8ncia : farem que la clau externa esborre i actualitze en cascada , ja que si deixa d'existir la principal no t\u00e9 sentit la d\u00e8bil. Depend\u00e8ncia en identificaci\u00f3 : a m\u00e9s d'esborrar i actualitzar en cascada, la clau externa formar\u00e0 part de la clau principal . Si la relaci\u00f3 per la qual dep\u00e8n en identificaci\u00f3 \u00e9s 1:N, far\u00e0 falta un altre camp en la clau principal. Si \u00e9s 1:1, amb la clau externa \u00e9s suficient com a clau principal En nostre exemple quedar\u00e0 aix\u00ed: 4.6 Resum depend\u00e8ncies Anem a fer un quadre resum amb distints graus de depend\u00e8ncia entre dues relacions i com es traduiria al Model Relacional: Per una altra banda, si ens trobem una entitat d\u00e8bil que dep\u00e8n en identificaci\u00f3 a trav\u00e9s d'una relaci\u00f3 1:1, \u00e9s suficient amb la clau principal de A com a clau principal de B Una altra q\u00fcesti\u00f3 que pot dur a confusi\u00f3 \u00e9s el cas de les claus externes formades per 2 camps. Ens basarem en l'exemple de sempre, en la taula FAMILIAR, ja que t\u00e9 una clau principal formada per 2 camps. Suposem que hi ha en el Model Entitat-Relaci\u00f3 una taula que dep\u00e8n d'ella, com podria ser comunicacions que se li han fet (cartes). Les entitats i la relaci\u00f3 entre elles podria ser aquesta: Com que la relaci\u00f3 \u00e9s de tipus 1:N la traduirem per una clau externa en CARTES. I quina ser\u00e0 la clau externa? Com que la taula FAMILIAR t\u00e9 una clau principal formada per 2 camps, haurem de posar una clau externa formada per 2 camps. Alerta! no seran 2 claus externes, sin\u00f3 una clau externa formada per 2 camps. Com sempre, representarem la clau externa amb un doble subratllat, que ara agafar\u00e0 als 2 camps. 4.7 Relacions tern\u00e0ries En una relaci\u00f3 tern\u00e0ria o superior construirem una nova taula, on inclourem com a claus externes les claus prim\u00e0ries de totes les entitats, i a m\u00e9s els atributs de la relaci\u00f3. Habitualment, la clau principal de la nova taula ser\u00e0 la combinaci\u00f3 de totes les claus principals de les entitats. Ocasionalment, si alguna entitat participa amb cardinalitat 1, la clau principal d'aquesta entitat no entraria a formar part de la clau principal de la nova taula. Igual que en el cas de les relacions M:N, ens haurem de preguntar si \u00e9s suficient amb la clau prim\u00e0ria generada o si s'haur\u00e0 d'incloure algun altre camp. En l'exemple que vam posar de relaci\u00f3 tern\u00e0ria, suposant els atributs de la relaci\u00f3 la data de compra i la quantitat: On hem posat totes les claus externes formant part de la clau principal, ja que totes entren amb cardinalitat N. Per\u00f2 no ten\u00edem prou amb aquesta clau principal, ja que el mateix departament pot comprar el mateix article al mateix prove\u00efdor m\u00e9s d'una vegada. Com no ten\u00edem prou, hem posat un altre camp. Seria moment, segurament, de substituir la clau principal que est\u00e0 formada per 4 camps, ja que en s\u00f3n massa. Posar\u00edem una altra clau principal, per\u00f2 les claus externes continuarien sent- ho, i a m\u00e9s serien no nules: 4.8 Especialitzacions Aquest aspecte, com en el cas de les relacions 1:1, tamb\u00e9 t\u00e9 m\u00faltiples solucions. El problema de les especialitzacions \u00e9s que, encara que de forma te\u00f2rica la soluci\u00f3 siga correcta, en la pr\u00e0ctica suposa moltes taules i amb un cert grau de manteniment entre elles. Per tant, i aplicant el sentit com\u00fa, moltes vegades es fa una simplificaci\u00f3, llevant b\u00e9 les subclasses, b\u00e9 la superclasse, com veurem a continuaci\u00f3. Aquestes s\u00f3n les possibilitats: Transformar les especialitzacions en taules amb la clau principal heretada i els atributs espec\u00edfics (com si substitu\u00edrem l'especialitzaci\u00f3 en relacions 1:1, amb les subclasses depenent en identificaci\u00f3 de la superclasse). Estaria tamb\u00e9 b\u00e9 afegir un atribut a la superclasse per a poder saber de quin tipus \u00e9s. En l'exemple ens quedaria: Simplificar les subclasses. Aleshores tots els atributs d'aquestes haurien de passar a la superclasse. Tamb\u00e9 s'haurien de passar totes les relacions que afecten a les subclasses, \"retocant\" les participacions totals (que ara ja no ho serien). Ara ser\u00e0 obligatori tenir el camp que distingeix el tipus (sin\u00f3, perdr\u00edem aquesta informaci\u00f3). Simplificar la superclasse. Aleshores tots els atributs d'aquesta passarien a cadascuna de les subclasses. Tamb\u00e9 passarien les relacions a cadascuna d'aquestes, \"retocant\" les participacions totals. 4.9 Restriccions externes Ja hem comentat que restriccions externes s\u00f3n restriccions que no es poden expressar per mig del model de dades. Aleshores les expressarem de paraula. Normalment, les restriccions externes del Model E/R continuaran sent-ho en el Model Relacional, perqu\u00e8 tampoc es podran expressar. En el nostre exemple ten\u00edem les restriccions externes del Model E/R: Rex1 : El cap d'un departament ha de ser membre d'aquest. Rex2 : Un empleat nom\u00e9s pot treballar en projectes coordinats pel seu departament. A\u00e7\u00f2 tampoc es pot expressar amb el Model Relacional, per tant les mantindrem. A banda, es poden crear m\u00e9s restriccions externes, perqu\u00e8 amb el Model Relacional no es pot expressar tot el que es podia expressar amb el Model E/R. Per exemple, en la relaci\u00f3: ja hem comentat que donar\u00e0 lloc, a banda de les taules de les entitats, a una altra taula: on dni i num_p s\u00f3n claus externes. Per\u00f2 l'entitat projecte participa de forma total en la relaci\u00f3, \u00e9s a dir, en tot projecte ha d'haver un empleat treballant. \u00bfCom ho controlem aix\u00f2? Doncs \u00e9s una nova restricci\u00f3 externa que la podr\u00edem formular aix\u00ed: RexR3 : Tot projecte ha de tenir com a m\u00ednim un empleat treballant-hi. Les participacions totals que ens suposaran una restricci\u00f3 externa s\u00f3n: En una relaci\u00f3 1:N , una participaci\u00f3 total de l'entitat que participa amb grau 1. En una relaci\u00f3 M:N , qualsevol participaci\u00f3 total (si les dues participen de forma total, aleshores hi haur\u00e0 dues restriccions externes). En una relaci\u00f3 1:1 , dep\u00e8n de la manera de traduir-se. La manera d'implementar les restriccions externes ser\u00e0 per mig d'un TRIGGER, que s'active quan hi haja una actualitzaci\u00f3 (inserci\u00f3, modificaci\u00f3 o esborrat) que afecte a la restricci\u00f3 externa. Per exemple, en la restricci\u00f3 RexR3 els moments importants s\u00f3n despr\u00e9s d'inserir un nou projecte, i abans d'eliminar o modificar en la taula Treballa (per si un projecte es queda sense gent treballant en ell). Les accions a desenvolupar podrien ser traure un av\u00eds, o obligar a inserir com a m\u00ednim una tupla en la taula Treballa , en el cas de la inserci\u00f3 d'un nou projecte; en el cas de modificaci\u00f3 o eliminaci\u00f3 en Treballa podria impedir-se aquesta actualitzaci\u00f3. En el nostre exemple tindrem les restriccions externes al Model Relacional: RexR1 : El cap d'un departament ha de ser membre d'aquest. RexR2 : Un empleat nom\u00e9s pot treballar en projectes coordinats pel seu departament. RexR3 : Tot projecte ha de tenir com a m\u00ednim un empleat treballant-hi. 4.10 Exemple Anem a veure com quedar\u00e0 definitivament la traducci\u00f3 de l'exemple que estem arrastrant des del Tema 2. Donarem 2 versions, tenint en compte o no l'especialitzaci\u00f3 de que el treballador pot ser cap o treballador normal. Sense tenir en compte l'especialitzaci\u00f3 tindrem aquesta soluci\u00f3: aquest v\u00eddeo explica tot el proc\u00e9s pas a pas: I aquesta seria la forma alternativa de representar-lo: I tenint en compte l'especialitzaci\u00f3: que aquest v\u00eddeo explica en els punts diferents a l'anterior soluci\u00f3 I ac\u00ed tindr\u00edem la representaci\u00f3 alternativa: Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0","title":"4. Tranformaci\u00f3 del M. E/R al M. Relacional"},{"location":"BD-T03_Model_Relacional/4_tranformaci_del_m_er_al_m_relacional/#4-tranformacio-del-m-er-al-m-relacional","text":"A continuaci\u00f3 veurem les regles de transformaci\u00f3 de l'esquema en el Model E/R al Model Relacional. D'aquesta manera continuem el proc\u00e9s de disseny d'una Base de Dades. En el Tema 2 hem apr\u00e8s a fer l'esquema en el Model Entitat-Relaci\u00f3. Ara el traduirem al Model Relacional, i ja es podr\u00e0 implementar en qualsevol SGBD Relacional. Faltaria nom\u00e9s el proc\u00e9s de Normalitzaci\u00f3 (tema 4) per acabar de deixar les taules perfectament dissenyades. De tota manera les Bases de Dades que dissenyem nosaltres, amb el proc\u00e9s descrit anteriorment, tindran unes taules molt \"normalitzades\", sempre que dissenyem b\u00e9.","title":"4. Tranformaci\u00f3 del M. E/R al M. Relacional"},{"location":"BD-T03_Model_Relacional/4_tranformaci_del_m_er_al_m_relacional/#41-entitats","text":"Tota entitat es transformar\u00e0 en una taula, amb tots els seus atributs, que es consideraran com a simples. Es tria un (o un conjunt) com a clau principal, i el denotarem subratllant-lo. Les entitats d\u00e8bils les estudiarem millor m\u00e9s endavant. En el nostre exemple, com ten\u00edem 4 entitats, ens eixiran de moment 4 taules: No considerarem els atributs multivaluats. Els tractarem i solucionarem en el tema seg\u00fcent, el de Normalitzaci\u00f3 .","title":"4.1 Entitats"},{"location":"BD-T03_Model_Relacional/4_tranformaci_del_m_er_al_m_relacional/#42-relacions-1n","text":"Per cada relaci\u00f3 1:N entre les entitats A i B , on A \u00e9s la que participa amb grau de cardinalitat 1, i B amb grau N, s'inclou un nou camp en B (del mateix tipus que la clau principal de A ) que a m\u00e9s ser\u00e0 clau externa que apuntar\u00e0 a A , m\u00e9s concretament a la clau principal de A . En moltes ocasions al camp nou de B se li posa el mateix nom que a la clau principal de A , per\u00f2 no \u00e9s necessari, dep\u00e9n del gust de cadasc\u00fa. Tamb\u00e9 s'inclouran en B tots els possibles atributs de la relaci\u00f3. La seg\u00fcent animaci\u00f3 intenta explicar-ho millor: Si a m\u00e9s l'entitat que participa amb grau N ho fa de forma total (com en la figura de baix), la clau externa no pot ser nula (\u00e9s a dir sempre ha de tenir un valor). En l'exemple nostre: Per la relaci\u00f3 Pertany (figura de dalt) inclourem l'atribut departament a Empleat , que a m\u00e9s haur\u00e0 de ser no nul. Per la relaci\u00f3 Controla inclourem l'atribut departament a Projecte (no nul). Per la relaci\u00f3 Supervisa inclourem l'atribut supervisor a Empleat (\u00e9s reflexiva), per\u00f2 aquest s\u00ed que pot ser nul. Encara que semble estrany, un camp pot ser clau externa que apunta a la clau principal de la mateixa taula. Per la relaci\u00f3 T\u00e9 entre empleat i familiar, inclourem en FAMILIAR l'atribut dni_e , per\u00f2 com que Familiar \u00e9s d\u00e8bil la veurem millor un poc m\u00e9s endavant.","title":"4.2 Relacions 1:N"},{"location":"BD-T03_Model_Relacional/4_tranformaci_del_m_er_al_m_relacional/#43-relacions-mn","text":"Per cada relaci\u00f3 M:N construirem una nova taula on s'inclouran com a clau externa les claus principals de les dues entitats, i a m\u00e9s la seua combinaci\u00f3 constituir\u00e0 (o formar\u00e0 part de) la clau principal. Inclourem tamb\u00e9 els possibles atributs de la relaci\u00f3. En l'exemple: Cada vegada que ens trobem amb una relaci\u00f3 M:N i la tradu\u00efm per una nova taula haurem de preguntar-nos si \u00e9s suficient amb la clau principal formada per les dues claus externes, o si fa falta afegir un altre camp. Hem de ser conscients que la clau principal no puga repetir-se, que hi haja 2 files amb la mateixa clau principal. Aix\u00ed, en l'exemple, ens haur\u00edem de fer la seg\u00fcent pregunta: pot un empleat treballar en el mateix projecte m\u00e9s d'una vegada? En aquest cas la contestaci\u00f3 \u00e9s negativa, i per tant \u00e9s suficient amb aquesta clau principal. Per\u00f2 suposem que la resposta \u00e9s que s\u00ed que pot treballar m\u00e9s d'una vegada al llarg del temps. En aquest cas seria una esp\u00e8cie d'hist\u00f2ric, on faria falta, a m\u00e9s, saber quan comen\u00e7a i quan acaba de treballar en un projecte un determinat treballador (serien atributs de la relaci\u00f3): Aleshores, com no \u00e9s suficient amb la clau principal formada per les dues claus externes, inclourem un altre camp en la clau principal. Sembla que el m\u00e9s adequat seria Data_c (ja no es pot donar el cas que el mateix treballador treballe m\u00e9s d'una vegada en el mateix projecte, comen\u00e7ant el mateix dia) Per\u00f2 per una altra banda, les claus principals molt llargues no s\u00f3n operatives, i encara que la traducci\u00f3 literal siga com hem dit, per motius pr\u00e0ctics podem canviar la clau principal. Considerarem que el nombre m\u00e0xim de camps en la clau principal \u00e9s de 3. 4 ja s\u00f3n massa, i aleshores buscarem una altra clau principal (un codi de treball, per exemple). Les claus externes continuarien sent-ho.","title":"4.3 Relacions M:N"},{"location":"BD-T03_Model_Relacional/4_tranformaci_del_m_er_al_m_relacional/#44-relacions-11","text":"No hi ha una forma \u00fanica de traduir aquestes relacions. Tres seran les possibles traduccions, segons la participaci\u00f3 total o parcial de les entitats en la relaci\u00f3, i tamb\u00e9 segons el que ens diga el \" sentit com\u00fa \". Si de les dues entitats que entren la relaci\u00f3, A i B , una d'elles i nom\u00e9s una, participa de forma total, per exemple B , traduirem la relaci\u00f3 1:1 com una clau externa en la taula corresponent a l'entitat que participa de forma total ( B ). Podem obligar tamb\u00e9 a que aquest camp que ser\u00e0 clau externa siga no nul (ja que totes les ocurr\u00e8ncies de B entren en la relaci\u00f3). Tamb\u00e9 podem fer que aquest camp siga \u00fanic (no es podr\u00e0 repetir, ja que si es puguera repetir seria una relaci\u00f3 1:N). A m\u00e9s, inclourem en B tots els possibles atributs de la relaci\u00f3. Per exemple, la relaci\u00f3 dirigeix , que \u00e9s 1:1 entre EMPLEAT i DEPARTAMENT : Com que l'entitat de la dreta participa de forma total, triarem DEPARTAMENT : Ho fem d'aquesta manera perqu\u00e8 tots els departaments tenen director, per\u00f2 no tots els empleats s\u00f3n directors. Si pos\u00e0rem la clau externa en la taula EMPLEAT (s'anomenaria per exemple dep_que_dirigeix ) moltes vegades estaria buit, ja que relativament s\u00f3n pocs els empleats que dirigeixen un departament. Vegem un altre exemple de relaci\u00f3 1:1, el de les papallones. Ten\u00edem una relaci\u00f3 1:1 entre PERSONA i COL\u00b7LECCI\u00d3 Triar\u00edem COL\u00b7LECCI\u00d3 , ja que entra de forma plena o total en la relaci\u00f3. Si les dues entitats participen de forma total, es pot considerar tot (les dues entitats i la relaci\u00f3, amb els seus possibles atributs) com una sola taula. En la pr\u00e0ctica aix\u00f2 ser\u00e0 prou estrany, perqu\u00e8 ja ho haur\u00edem considerat una sola entitat. Per exemple, considerem que totes les persones que estudiem tenen una col\u00b7lecci\u00f3: Aleshores podr\u00edem considerar una \u00fanica taula, que continga les dades de la persona i de la seua col\u00b7lecci\u00f3: De tota manera, pot ser ens interesse (per separar clarament els dos tipus d'informaci\u00f3) dues taules. Aleshores podr\u00edem traduir-lo com en el primer punt, amb una clau externa (no nula) en una de les dues taules, i haur\u00edem de triar la taula que menys s'utilitze. Si les dues entitats participen de forma parcial, com que si posem una clau externa en una de les dues, moltes vegades tindr\u00e0 valor nul, podem traduir-la com una nova taula que marque la relaci\u00f3, on hi haur\u00e0 una tupla per cada relaci\u00f3 entre dues ocurr\u00e8ncies. Inclour\u00edem en la nova taula els possibles atributs de la relaci\u00f3. En l'exemple podria ser que les col\u00b7leccions pertanyen a una persona particular o a una instituci\u00f3 (no tenen propietari): Quedaria: Per\u00f2 com coment\u00e0vem al principi, haurem d'aplicar el sentit com\u00fa, ja que potser una de les dues podria participar de forma \"quasi\" total (per exemple, quasi totes les col\u00b7leccions s\u00f3n d'una persona). Aleshores podria ser millor traduir-lo com en el primer cas, posant la clau externa en la que participa de forma \"quasi\" total, ja que aquesta tindr\u00e0 relativament pocs valors nuls, i seria m\u00e9s cost\u00f3s mantenir una altra taula. Evidentment la clau externa s\u00ed que podria ser nula, en aquest cas. Resumint, una relaci\u00f3 1:1 quasi sempre la traduirem com una clau externa en la taula que participa en la relaci\u00f3 de forma total o quasi total (o la que previsiblement t\u00e9 m\u00e9s ocurr\u00e8ncies en la relaci\u00f3)","title":"4.4 Relacions 1:1"},{"location":"BD-T03_Model_Relacional/4_tranformaci_del_m_er_al_m_relacional/#45-entitats-debils","text":"Les entitats d\u00e8bils, com que com a m\u00ednim depenen d'una altra, podrem ser m\u00e9s restrictius que les altres. Una entitat sempre \u00e9s d\u00e8bil a trav\u00e9s, com a m\u00ednim, d'una relaci\u00f3 que la comunica amb l'entitat principal. A m\u00e9s participa de forma total (com que no pot existir sense l'altra, tota ocurr\u00e8ncia est\u00e0 en la relaci\u00f3). Per tant, tota entitat d\u00e8bil tindr\u00e0 una clau externa, que apunta a la principal i ser\u00e0 no nula. Per\u00f2 encara podem anar m\u00e9s enll\u00e0: Depend\u00e8ncia en exist\u00e8ncia : farem que la clau externa esborre i actualitze en cascada , ja que si deixa d'existir la principal no t\u00e9 sentit la d\u00e8bil. Depend\u00e8ncia en identificaci\u00f3 : a m\u00e9s d'esborrar i actualitzar en cascada, la clau externa formar\u00e0 part de la clau principal . Si la relaci\u00f3 per la qual dep\u00e8n en identificaci\u00f3 \u00e9s 1:N, far\u00e0 falta un altre camp en la clau principal. Si \u00e9s 1:1, amb la clau externa \u00e9s suficient com a clau principal En nostre exemple quedar\u00e0 aix\u00ed:","title":"4.5 Entitats d\u00e8bils"},{"location":"BD-T03_Model_Relacional/4_tranformaci_del_m_er_al_m_relacional/#46-resum-dependencies","text":"Anem a fer un quadre resum amb distints graus de depend\u00e8ncia entre dues relacions i com es traduiria al Model Relacional: Per una altra banda, si ens trobem una entitat d\u00e8bil que dep\u00e8n en identificaci\u00f3 a trav\u00e9s d'una relaci\u00f3 1:1, \u00e9s suficient amb la clau principal de A com a clau principal de B Una altra q\u00fcesti\u00f3 que pot dur a confusi\u00f3 \u00e9s el cas de les claus externes formades per 2 camps. Ens basarem en l'exemple de sempre, en la taula FAMILIAR, ja que t\u00e9 una clau principal formada per 2 camps. Suposem que hi ha en el Model Entitat-Relaci\u00f3 una taula que dep\u00e8n d'ella, com podria ser comunicacions que se li han fet (cartes). Les entitats i la relaci\u00f3 entre elles podria ser aquesta: Com que la relaci\u00f3 \u00e9s de tipus 1:N la traduirem per una clau externa en CARTES. I quina ser\u00e0 la clau externa? Com que la taula FAMILIAR t\u00e9 una clau principal formada per 2 camps, haurem de posar una clau externa formada per 2 camps. Alerta! no seran 2 claus externes, sin\u00f3 una clau externa formada per 2 camps. Com sempre, representarem la clau externa amb un doble subratllat, que ara agafar\u00e0 als 2 camps.","title":"4.6 Resum depend\u00e8ncies"},{"location":"BD-T03_Model_Relacional/4_tranformaci_del_m_er_al_m_relacional/#47-relacions-ternaries","text":"En una relaci\u00f3 tern\u00e0ria o superior construirem una nova taula, on inclourem com a claus externes les claus prim\u00e0ries de totes les entitats, i a m\u00e9s els atributs de la relaci\u00f3. Habitualment, la clau principal de la nova taula ser\u00e0 la combinaci\u00f3 de totes les claus principals de les entitats. Ocasionalment, si alguna entitat participa amb cardinalitat 1, la clau principal d'aquesta entitat no entraria a formar part de la clau principal de la nova taula. Igual que en el cas de les relacions M:N, ens haurem de preguntar si \u00e9s suficient amb la clau prim\u00e0ria generada o si s'haur\u00e0 d'incloure algun altre camp. En l'exemple que vam posar de relaci\u00f3 tern\u00e0ria, suposant els atributs de la relaci\u00f3 la data de compra i la quantitat: On hem posat totes les claus externes formant part de la clau principal, ja que totes entren amb cardinalitat N. Per\u00f2 no ten\u00edem prou amb aquesta clau principal, ja que el mateix departament pot comprar el mateix article al mateix prove\u00efdor m\u00e9s d'una vegada. Com no ten\u00edem prou, hem posat un altre camp. Seria moment, segurament, de substituir la clau principal que est\u00e0 formada per 4 camps, ja que en s\u00f3n massa. Posar\u00edem una altra clau principal, per\u00f2 les claus externes continuarien sent- ho, i a m\u00e9s serien no nules:","title":"4.7 Relacions tern\u00e0ries"},{"location":"BD-T03_Model_Relacional/4_tranformaci_del_m_er_al_m_relacional/#48-especialitzacions","text":"Aquest aspecte, com en el cas de les relacions 1:1, tamb\u00e9 t\u00e9 m\u00faltiples solucions. El problema de les especialitzacions \u00e9s que, encara que de forma te\u00f2rica la soluci\u00f3 siga correcta, en la pr\u00e0ctica suposa moltes taules i amb un cert grau de manteniment entre elles. Per tant, i aplicant el sentit com\u00fa, moltes vegades es fa una simplificaci\u00f3, llevant b\u00e9 les subclasses, b\u00e9 la superclasse, com veurem a continuaci\u00f3. Aquestes s\u00f3n les possibilitats: Transformar les especialitzacions en taules amb la clau principal heretada i els atributs espec\u00edfics (com si substitu\u00edrem l'especialitzaci\u00f3 en relacions 1:1, amb les subclasses depenent en identificaci\u00f3 de la superclasse). Estaria tamb\u00e9 b\u00e9 afegir un atribut a la superclasse per a poder saber de quin tipus \u00e9s. En l'exemple ens quedaria: Simplificar les subclasses. Aleshores tots els atributs d'aquestes haurien de passar a la superclasse. Tamb\u00e9 s'haurien de passar totes les relacions que afecten a les subclasses, \"retocant\" les participacions totals (que ara ja no ho serien). Ara ser\u00e0 obligatori tenir el camp que distingeix el tipus (sin\u00f3, perdr\u00edem aquesta informaci\u00f3). Simplificar la superclasse. Aleshores tots els atributs d'aquesta passarien a cadascuna de les subclasses. Tamb\u00e9 passarien les relacions a cadascuna d'aquestes, \"retocant\" les participacions totals.","title":"4.8 Especialitzacions"},{"location":"BD-T03_Model_Relacional/4_tranformaci_del_m_er_al_m_relacional/#49-restriccions-externes","text":"Ja hem comentat que restriccions externes s\u00f3n restriccions que no es poden expressar per mig del model de dades. Aleshores les expressarem de paraula. Normalment, les restriccions externes del Model E/R continuaran sent-ho en el Model Relacional, perqu\u00e8 tampoc es podran expressar. En el nostre exemple ten\u00edem les restriccions externes del Model E/R: Rex1 : El cap d'un departament ha de ser membre d'aquest. Rex2 : Un empleat nom\u00e9s pot treballar en projectes coordinats pel seu departament. A\u00e7\u00f2 tampoc es pot expressar amb el Model Relacional, per tant les mantindrem. A banda, es poden crear m\u00e9s restriccions externes, perqu\u00e8 amb el Model Relacional no es pot expressar tot el que es podia expressar amb el Model E/R. Per exemple, en la relaci\u00f3: ja hem comentat que donar\u00e0 lloc, a banda de les taules de les entitats, a una altra taula: on dni i num_p s\u00f3n claus externes. Per\u00f2 l'entitat projecte participa de forma total en la relaci\u00f3, \u00e9s a dir, en tot projecte ha d'haver un empleat treballant. \u00bfCom ho controlem aix\u00f2? Doncs \u00e9s una nova restricci\u00f3 externa que la podr\u00edem formular aix\u00ed: RexR3 : Tot projecte ha de tenir com a m\u00ednim un empleat treballant-hi. Les participacions totals que ens suposaran una restricci\u00f3 externa s\u00f3n: En una relaci\u00f3 1:N , una participaci\u00f3 total de l'entitat que participa amb grau 1. En una relaci\u00f3 M:N , qualsevol participaci\u00f3 total (si les dues participen de forma total, aleshores hi haur\u00e0 dues restriccions externes). En una relaci\u00f3 1:1 , dep\u00e8n de la manera de traduir-se. La manera d'implementar les restriccions externes ser\u00e0 per mig d'un TRIGGER, que s'active quan hi haja una actualitzaci\u00f3 (inserci\u00f3, modificaci\u00f3 o esborrat) que afecte a la restricci\u00f3 externa. Per exemple, en la restricci\u00f3 RexR3 els moments importants s\u00f3n despr\u00e9s d'inserir un nou projecte, i abans d'eliminar o modificar en la taula Treballa (per si un projecte es queda sense gent treballant en ell). Les accions a desenvolupar podrien ser traure un av\u00eds, o obligar a inserir com a m\u00ednim una tupla en la taula Treballa , en el cas de la inserci\u00f3 d'un nou projecte; en el cas de modificaci\u00f3 o eliminaci\u00f3 en Treballa podria impedir-se aquesta actualitzaci\u00f3. En el nostre exemple tindrem les restriccions externes al Model Relacional: RexR1 : El cap d'un departament ha de ser membre d'aquest. RexR2 : Un empleat nom\u00e9s pot treballar en projectes coordinats pel seu departament. RexR3 : Tot projecte ha de tenir com a m\u00ednim un empleat treballant-hi.","title":"4.9 Restriccions externes"},{"location":"BD-T03_Model_Relacional/4_tranformaci_del_m_er_al_m_relacional/#410-exemple","text":"Anem a veure com quedar\u00e0 definitivament la traducci\u00f3 de l'exemple que estem arrastrant des del Tema 2. Donarem 2 versions, tenint en compte o no l'especialitzaci\u00f3 de que el treballador pot ser cap o treballador normal. Sense tenir en compte l'especialitzaci\u00f3 tindrem aquesta soluci\u00f3: aquest v\u00eddeo explica tot el proc\u00e9s pas a pas: I aquesta seria la forma alternativa de representar-lo: I tenint en compte l'especialitzaci\u00f3: que aquest v\u00eddeo explica en els punts diferents a l'anterior soluci\u00f3 I ac\u00ed tindr\u00edem la representaci\u00f3 alternativa: Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0","title":"4.10 Exemple"},{"location":"BD-T03_Model_Relacional/5_llenguatges_relacionals/","text":"5. Llenguatges relacionals Fins el moment hem dissenyat una B.D. Relacional. Per\u00f2 si volem la B.D. \u00e9s per consultar-la, treure la informaci\u00f3 que ens interessa, manipular-la. Ens far\u00e0 falta, per tant, un llenguatge de manipulaci\u00f3 de la B.D. ( DML ). Aquestos llenguatges poden estar basats en l'\u00c0lgebra Relacional o en el C\u00e0lcul Relacional. Per mig de l' \u00c0LGEBRA RELACIONAL farem operacions sobre les taules, combinant-les, seleccionant el que ens importa, ..., en definitiva manipulant-les. El resultat ser\u00e0 una nova taula, que ser\u00e0 el resultat final o servir\u00e0 per a fer una altra operaci\u00f3. Les operacions poden ser projecci\u00f3 (agafar algunes columnes d'una taula), selecci\u00f3 (seleccionar algunes files d'una taula, les que acompleixen una determinada condici\u00f3), uni\u00f3 , intersecci\u00f3 , producte cartesi\u00e0 , reuni\u00f3 ... El llenguatge SQL , que \u00e9s l'est\u00e0ndard de fet i que veurem en el tema 6, est\u00e0 basat en l'\u00c0lgebra relacional. Les sent\u00e8ncies s\u00f3n de la forma: SELECT dni, nom, sou FROM EMPLEAT WHERE sou > 2000 on estem projectant sobre els camps dni, nom i sou, i seleccionant les files que acompleixen la condici\u00f3 del final Anem a comentar dues de les operacions esmentades abans. El producte cartesi\u00e0 de dues taules consisteix en combinar cadascuna de les files d'una taula amb cadascuna de les files de l'altra. Aix\u00ed, el producte cartesi\u00e0 de Empleat i Departament seria: SELECT dni, nom, nom_d FROM EMPLEAT , DEPARTAMENT Per\u00f2 aquest operaci\u00f3 no sembla tenir molt de sentit en aquest cas \u00bfper a qu\u00e8 volem combinar un empleat amb tots els departaments de l'empresa? Sembla molt m\u00e9s l\u00f2gic combinar cada empleat \u00fanicament amb el departament al qual pertany. La reuni\u00f3 de dues taules consisteix en fer un producte cartesi\u00e0 i despr\u00e9s seleccionar les files que tenen el mateix valor en dos camps determinats (un de cada taula). SELECT dni, nom, nom_d FROM EMPLEAT , DEPARTAMENT WHERE EMPLEAT.departament = DEPARTAMENT.num_d \u00c9s a dir, del producte cartesi\u00e0 seleccionem nom\u00e9s les files en les quals coincideixen els camp departament i num_d, combinant cada empleat amb el seu departament. En el C\u00c0LCUL RELACIONAL , es defineixen variables de tipus taula , s'utilitzen operadors entre les variables, i tamb\u00e9 uns quantificadors ( per a tot i existeix ). Va de forma paral\u00b7lela a l'\u00e0lgebra de manera que es poden obtenir les mateixes coses amb l'\u00c0lgebra i amb el C\u00e0lcul. El QBE (Query By Example) es basa en el c\u00e0lcul relacional, i la seua particularitat \u00e9s la senzillesa de fer consultes per als no experts. Per mig d'una plantilla podrem col\u00b7locar els atributs que volem visualitzar, l'ordre, els criteris de selecci\u00f3, etc. \u00c9s el que utilitzen tant Access com Base per a fer les consultes amb l'assistent. Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0","title":"5. Llenguatges relacionals"},{"location":"BD-T03_Model_Relacional/5_llenguatges_relacionals/#5-llenguatges-relacionals","text":"Fins el moment hem dissenyat una B.D. Relacional. Per\u00f2 si volem la B.D. \u00e9s per consultar-la, treure la informaci\u00f3 que ens interessa, manipular-la. Ens far\u00e0 falta, per tant, un llenguatge de manipulaci\u00f3 de la B.D. ( DML ). Aquestos llenguatges poden estar basats en l'\u00c0lgebra Relacional o en el C\u00e0lcul Relacional. Per mig de l' \u00c0LGEBRA RELACIONAL farem operacions sobre les taules, combinant-les, seleccionant el que ens importa, ..., en definitiva manipulant-les. El resultat ser\u00e0 una nova taula, que ser\u00e0 el resultat final o servir\u00e0 per a fer una altra operaci\u00f3. Les operacions poden ser projecci\u00f3 (agafar algunes columnes d'una taula), selecci\u00f3 (seleccionar algunes files d'una taula, les que acompleixen una determinada condici\u00f3), uni\u00f3 , intersecci\u00f3 , producte cartesi\u00e0 , reuni\u00f3 ... El llenguatge SQL , que \u00e9s l'est\u00e0ndard de fet i que veurem en el tema 6, est\u00e0 basat en l'\u00c0lgebra relacional. Les sent\u00e8ncies s\u00f3n de la forma: SELECT dni, nom, sou FROM EMPLEAT WHERE sou > 2000 on estem projectant sobre els camps dni, nom i sou, i seleccionant les files que acompleixen la condici\u00f3 del final Anem a comentar dues de les operacions esmentades abans. El producte cartesi\u00e0 de dues taules consisteix en combinar cadascuna de les files d'una taula amb cadascuna de les files de l'altra. Aix\u00ed, el producte cartesi\u00e0 de Empleat i Departament seria: SELECT dni, nom, nom_d FROM EMPLEAT , DEPARTAMENT Per\u00f2 aquest operaci\u00f3 no sembla tenir molt de sentit en aquest cas \u00bfper a qu\u00e8 volem combinar un empleat amb tots els departaments de l'empresa? Sembla molt m\u00e9s l\u00f2gic combinar cada empleat \u00fanicament amb el departament al qual pertany. La reuni\u00f3 de dues taules consisteix en fer un producte cartesi\u00e0 i despr\u00e9s seleccionar les files que tenen el mateix valor en dos camps determinats (un de cada taula). SELECT dni, nom, nom_d FROM EMPLEAT , DEPARTAMENT WHERE EMPLEAT.departament = DEPARTAMENT.num_d \u00c9s a dir, del producte cartesi\u00e0 seleccionem nom\u00e9s les files en les quals coincideixen els camp departament i num_d, combinant cada empleat amb el seu departament. En el C\u00c0LCUL RELACIONAL , es defineixen variables de tipus taula , s'utilitzen operadors entre les variables, i tamb\u00e9 uns quantificadors ( per a tot i existeix ). Va de forma paral\u00b7lela a l'\u00e0lgebra de manera que es poden obtenir les mateixes coses amb l'\u00c0lgebra i amb el C\u00e0lcul. El QBE (Query By Example) es basa en el c\u00e0lcul relacional, i la seua particularitat \u00e9s la senzillesa de fer consultes per als no experts. Per mig d'una plantilla podrem col\u00b7locar els atributs que volem visualitzar, l'ordre, els criteris de selecci\u00f3, etc. \u00c9s el que utilitzen tant Access com Base per a fer les consultes amb l'assistent. Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0","title":"5. Llenguatges relacionals"},{"location":"BD-T03_Model_Relacional/6_exercicis/","text":"6. Exercicis Exercici 1 Realitzar l'esquema relacional corresponent a l'exercici 1 del Tema 2. Recordeu que ten\u00edem 3 opcions: Exercici 2 Realitzar l'esquema relacional corresponent a l'exercici 2 del Tema 2. Exercici 3 Realitzar l'esquema relacional corresponent a l'exercici 3 del Tema 2. Exercici 4 Realitzar l'esquema relacional corresponent a l'exercici 4 del Tema 2. Recordeu que el rombe amb doble ratlla significa depend\u00e8ncia en identificaci\u00f3; Exercici 5 Realitzar l'esquema relacional corresponent a l'exercici 5 del Tema 2. Exercici 6 Realitzar l'esquema relacional corresponent a l'exercici 6 del Tema 2. Exercici 7 Realitzar l'esquema relacional corresponent a una empresa de l\u00ednies ferrovi\u00e0ries. En la de dalt considerem \u00fanicament els viatges (i no els trajectes). A m\u00e9s, nom\u00e9s marquem estaci\u00f3 d'origen i de dest\u00ed d'un viatge. En la segona incorporem els trajectes, i a m\u00e9s marquem totes les estacions on es para en un trajecte. Exercici 8 Realitzar l'esquema relacional corresponent a un sistema d'informaci\u00f3 sobre el material inform\u00e0tic d'una empresa. Exercici 9 Realitzar l'esquema relacional corresponent a un sistema d'informaci\u00f3 d'una empresa que ven gran varietat de productes. Per a la venda d'aquestos productes, disposa d'un conjunt de viatjants que realitzen visites als clients oferint els seus productes. Exercici 10 Realitzar l'esquema relacional corresponent a un Parc Zool\u00f2gic que vol guardar informaci\u00f3 de les esp\u00e8cies que t\u00e9, els empleats (cuidadors i guies), i els distints itineraris de visita que ofrereix. Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0","title":"6. Exercicis"},{"location":"BD-T03_Model_Relacional/6_exercicis/#6-exercicis","text":"","title":"6. Exercicis"},{"location":"BD-T03_Model_Relacional/6_exercicis/#exercici-1","text":"Realitzar l'esquema relacional corresponent a l'exercici 1 del Tema 2. Recordeu que ten\u00edem 3 opcions:","title":"Exercici 1"},{"location":"BD-T03_Model_Relacional/6_exercicis/#exercici-2","text":"Realitzar l'esquema relacional corresponent a l'exercici 2 del Tema 2.","title":"Exercici 2"},{"location":"BD-T03_Model_Relacional/6_exercicis/#exercici-3","text":"Realitzar l'esquema relacional corresponent a l'exercici 3 del Tema 2.","title":"Exercici 3"},{"location":"BD-T03_Model_Relacional/6_exercicis/#exercici-4","text":"Realitzar l'esquema relacional corresponent a l'exercici 4 del Tema 2. Recordeu que el rombe amb doble ratlla significa depend\u00e8ncia en identificaci\u00f3;","title":"Exercici 4"},{"location":"BD-T03_Model_Relacional/6_exercicis/#exercici-5","text":"Realitzar l'esquema relacional corresponent a l'exercici 5 del Tema 2.","title":"Exercici 5"},{"location":"BD-T03_Model_Relacional/6_exercicis/#exercici-6","text":"Realitzar l'esquema relacional corresponent a l'exercici 6 del Tema 2.","title":"Exercici 6"},{"location":"BD-T03_Model_Relacional/6_exercicis/#exercici-7","text":"Realitzar l'esquema relacional corresponent a una empresa de l\u00ednies ferrovi\u00e0ries. En la de dalt considerem \u00fanicament els viatges (i no els trajectes). A m\u00e9s, nom\u00e9s marquem estaci\u00f3 d'origen i de dest\u00ed d'un viatge. En la segona incorporem els trajectes, i a m\u00e9s marquem totes les estacions on es para en un trajecte.","title":"Exercici 7"},{"location":"BD-T03_Model_Relacional/6_exercicis/#exercici-8","text":"Realitzar l'esquema relacional corresponent a un sistema d'informaci\u00f3 sobre el material inform\u00e0tic d'una empresa.","title":"Exercici 8"},{"location":"BD-T03_Model_Relacional/6_exercicis/#exercici-9","text":"Realitzar l'esquema relacional corresponent a un sistema d'informaci\u00f3 d'una empresa que ven gran varietat de productes. Per a la venda d'aquestos productes, disposa d'un conjunt de viatjants que realitzen visites als clients oferint els seus productes.","title":"Exercici 9"},{"location":"BD-T03_Model_Relacional/6_exercicis/#exercici-10","text":"Realitzar l'esquema relacional corresponent a un Parc Zool\u00f2gic que vol guardar informaci\u00f3 de les esp\u00e8cies que t\u00e9, els empleats (cuidadors i guies), i els distints itineraris de visita que ofrereix. Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0","title":"Exercici 10"},{"location":"BD-T03_Model_Relacional/objectius_i_coneixements_previs/","text":"Objectius i coneixements previs Objectius Els objectius d'aquest tema s\u00f3n: Con\u00e9ixer l'estructura b\u00e0sica del model: la taula. Saber descriure els camps, amb el seu domini, i saber triar la clau principal. Saber definir altres restriccions (no nul, \u00fanic, ...) Entendre el concepte de clau externa, i saber definir les necess\u00e0ries. Saber traduir correctament del Model Entitat-Relaci\u00f3 al Model Relacional. Redefinir les taules necess\u00e0ries atenent a motius pr\u00e0ctics. Coneixements previs Els coneixements previs necessaris per al tema s\u00f3n els del tema 2: Model Entitat-Relaci\u00f3. En certa manera aquest tema aclarir\u00e0 conceptes d'aquell tema, ja que ens permetr\u00e0 aplicar-lo a una cosa palpable com s\u00f3n les taules, directament implementables en un SGBD Relacional. Aix\u00ed podrem concretar possibles ambig\u00fcitats del esquema Entitat-Relaci\u00f3, i saber si valen la pena determinades restriccions. Per\u00f2 entendre el Model Entitat-Relaci\u00f3 i dominar la interpretaci\u00f3 d'un esquema ser\u00e0 b\u00e0sic en el disseny d'una Base de Dades. Sempre comen\u00e7arem pel Model Entitat-Relaci\u00f3, i posteriorment el traduirem al Model Relacional, aplicant en tot cas el sentit com\u00fa. Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0","title":"Objectius i coneixements previs"},{"location":"BD-T03_Model_Relacional/objectius_i_coneixements_previs/#objectius-i-coneixements-previs","text":"Objectius Els objectius d'aquest tema s\u00f3n: Con\u00e9ixer l'estructura b\u00e0sica del model: la taula. Saber descriure els camps, amb el seu domini, i saber triar la clau principal. Saber definir altres restriccions (no nul, \u00fanic, ...) Entendre el concepte de clau externa, i saber definir les necess\u00e0ries. Saber traduir correctament del Model Entitat-Relaci\u00f3 al Model Relacional. Redefinir les taules necess\u00e0ries atenent a motius pr\u00e0ctics. Coneixements previs Els coneixements previs necessaris per al tema s\u00f3n els del tema 2: Model Entitat-Relaci\u00f3. En certa manera aquest tema aclarir\u00e0 conceptes d'aquell tema, ja que ens permetr\u00e0 aplicar-lo a una cosa palpable com s\u00f3n les taules, directament implementables en un SGBD Relacional. Aix\u00ed podrem concretar possibles ambig\u00fcitats del esquema Entitat-Relaci\u00f3, i saber si valen la pena determinades restriccions. Per\u00f2 entendre el Model Entitat-Relaci\u00f3 i dominar la interpretaci\u00f3 d'un esquema ser\u00e0 b\u00e0sic en el disseny d'una Base de Dades. Sempre comen\u00e7arem pel Model Entitat-Relaci\u00f3, i posteriorment el traduirem al Model Relacional, aplicant en tot cas el sentit com\u00fa. Llicenciat sota la Llic\u00e8ncia Creative Commons Reconeixement NoComercial CompartirIgual 3.0","title":"Objectius i coneixements previs"}]}